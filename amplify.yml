version: 1
frontend:
  phases:
    # IMPORTANT - Please verify your build commands
    preBuild: 
      commands:
        - cd giraffe-gang
        - npm ci
        - OUTPUT=$(terraform output -raw api_gateway_url)
        - printf "const API_URL = \"${OUTPUT}\";\n\nexport default API_URL;" > src/data/output.js
    build:
      commands:
        - npm run build
        - ls -la
  artifacts:
    # IMPORTANT - Please verify your build output directory
    baseDirectory: giraffe-gang/build
    files:
      - '**/*'
  cache:
    paths: 
      - node_modules/**/*
